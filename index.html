<!-- ============ index.html ============ -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>법조문 자동 추출·검색 · 고급버전 (모듈)</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
<div class="wrap">
  <h1>법조문 자동 추출·검색 · <span class="k">고급버전</span> <span class="small">(OC=bro3362 · JSON 우선 · 프록시 폴백)</span></h1>
  <div class="hint">HTML 직호출이 막히는 환경을 피하기 위해 <b>type=JSON</b>으로 조문을 받아 로컬에서 렌더링합니다. 실패 시 전체 HTML 또는 퍼블릭 페이지 스니펫으로 폴백합니다.</div>

  <div class="grid">
    <div>
      <div class="card">
        <label for="input"><b>본문 입력</b></label>
        <textarea id="input" placeholder="예) 건축법 제22조, 같은법 제23조, 동법시행령 제9조의2 제3항 …"></textarea>
      </div>
    </div>
    <div>
      <div class="card">
        <div class="row"><span class="badge">OC: bro3362 (고정)</span></div>
        <div class="row"><label>프록시</label><input id="proxy" type="text" value="https://law-proxy.hyok96.workers.dev/?url=" /></div>
        <div class="row"><button id="run">추출·검색</button><button class="secondary" id="clear">지우기</button><button class="secondary" id="runTests">테스트 실행</button><button class="secondary" id="runTests2">테스트(추가)</button></div>
        <div class="small">• CORS로 본문을 못 읽을 때 프록시가 자동 사용됩니다.</div>
      </div>
    </div>
  </div>

  <div class="card" id="foundBox">
    <h2>추출된 인용</h2>
    <ol id="foundList"></ol>
  </div>

  <div class="card result" id="resBox">
    <h2>검색 결과 (위에서부터 순서대로 표시)</h2>
    <ol id="resList"></ol>
  </div>

  <div class="card tests">
    <h2>내장 테스트</h2>
    <div id="testOutput" class="small">[테스트 대기 중]</div>
  </div>
</div>

<!-- 로컬 전체보기 모달 -->
<div id="viewer" class="viewer" aria-hidden="true">
  <div class="box">
    <div class="hdr">
      <div id="viewerTitle">로컬 전체(스크롤)</div>
      <button class="close" id="viewerClose">닫기</button>
    </div>
    <div id="viewerBody" class="body"></div>
  </div>
</div>

<script type="module" src="./js/main.js"></script>
</body>
</html>


/* ============ css/style.css ============ */
:root{--bg:#0b1020;--panel:#11172c;--muted:#8492b5;--line:#1f2a49;--accent:#5b8cff;--txt:#e6ecff}
html,body{height:100%}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;background:#0b1020;color:#e6ecff}
.wrap{max-width:1200px;margin:0 auto;padding:24px}
h1{font-size:1.35rem;margin:0 0 8px}
.hint{color:#8492b5;font-size:.95rem;margin-bottom:16px}
.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
textarea{width:100%;min-height:210px;padding:12px;border-radius:12px;border:1px solid #1f2a49;background:#0f1731;color:#e6ecff}
.card{border:1px solid #1f2a49;background:#11172c;border-radius:14px;padding:14px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0}
input[type="text"]{padding:10px 12px;border-radius:10px;border:1px solid #1f2a49;background:#0f1731;color:#e6ecff;min-width:260px}
button{padding:10px 14px;border:0;border-radius:10px;background:#5b8cff;color:#fff;cursor:pointer}
button.secondary{background:#445b9c}
button:disabled{opacity:.6;cursor:not-allowed}
.tag{display:inline-flex;gap:6px;align-items:center;padding:2px 8px;border:1px solid #1f2a49;background:#0f1731;border-radius:999px;color:#c9d6ff;font-size:.8rem}
.result h2{margin:0 0 8px}
ol{margin:0;padding-left:20px}
.k{color:#9fb4ff}
.small{font-size:.9rem;color:#9aa8ce}
.item{padding:10px;border-top:1px dashed #1f2a49}
.monos{font-family:ui-monospace,Menlo,Consolas,monospace;background:#0f1731;border-radius:6px;padding:0 6px}
.render{margin-top:8px;border:1px solid #1f2a49;border-radius:12px;overflow:hidden}
.render .hdr{display:flex;justify-content:space-between;align-items:center;background:#0f1731;padding:8px 10px;border-bottom:1px solid #1f2a49}
.render .body{padding:10px;max-height:360px;overflow:auto;background:#0c1330}
a{color:#9ec1ff}
.tests{margin-top:18px}
.pass{color:#22c55e}
.fail{color:#ef4444}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#0f1731;border:1px solid #1f2a49;color:#c9d6ff;font-size:.8rem}
.viewer{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:50}
.viewer.on{display:flex}
.viewer .box{width:min(1100px,96vw);height:min(80vh,900px);background:#11172c;border:1px solid #1f2a49;border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
.viewer .hdr{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#0f1731;border-bottom:1px solid #1f2a49}
.viewer .body{flex:1;overflow:auto;background:#0c1330;padding:12px}
.viewer .close{background:#3b4977}
mark.hl{background:#fde047;color:#111;padding:0 .2em;border-radius:3px}
.tooltip{position:fixed;max-width:560px;max-height:360px;overflow:auto;background:#0f1731;color:#e6ecff;border:1px solid #1f2a49;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.45);padding:10px;z-index:60;display:none}
.tooltip .hdr{font-weight:600;margin-bottom:6px;color:#cfe0ff}
.tooltip .cnt{font-size:.92rem;line-height:1.45}
.tooltip .loading{color:#9aa8ce}
.tooltip .err{color:#ef4444}
